{{ define "auth_modal" }}
<div id="authModal" class="modal-backdrop">
    <div class="modal">
        <button class="modal-close" onclick="closeAuthModal()">&times;</button>

        <!-- Regular Auth Forms -->
        <div id="authForms" class="auth-content">
            <div class="auth-tabs">
                <button class="auth-tab-link active" onclick="switchAuthMode('login')">Login</button>
                <button class="auth-tab-link" onclick="switchAuthMode('register')">Register</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <form onsubmit="handleEmailLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn">Login</button>
                </form>
                
                <div class="divider">
                    <span>or</span>
                </div>

                <button type="button" class="btn btn-passkey" onclick="startPasskeyAuth('login')">
                    <img src="/static/img/passkey.jpg" alt="Passkey" width="24" height="24">
                    Continue with Passkey
                </button>
                
                <div class="divider">
                    <span>or</span>
                </div>
                
                <button type="button" class="btn btn-metamask" onclick="startWalletConnection()">
                    <img src="/static/img/metamask.svg" alt="MetaMask">
                    Connect with MetaMask
                </button>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <form onsubmit="handleEmailRegister(event)">
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <div id="registerError" class="error-message" style="display: none; color: #ff4444; margin: 16px 0; text-align: center;"></div>
                    <button type="submit" class="btn">Register</button>
                </form>
                
                <div class="divider">
                    <span>or</span>
                </div>

                <button type="button" class="btn btn-passkey" onclick="startPasskeyAuth('register')">
                    <img src="/static/img/passkey.jpg" alt="Passkey" width="24" height="24">
                    Register with Passkey
                </button>
                
                <div class="divider">
                    <span>or</span>
                </div>
                
                <button type="button" class="btn btn-metamask" onclick="startWalletConnection()">
                    <img src="/static/img/metamask.svg" alt="MetaMask">
                    Connect with MetaMask
                </button>
            </div>
        </div>

        <!-- Wallet Connection Steps -->
        <div id="walletSteps" class="auth-content" style="display: none;">
            <h2>Connect Wallet</h2>
            <div class="connection-steps">
                <div class="step" id="connectStep">
                    <div class="step-icon">
                        <div class="spinner"></div>
                        <div class="check-icon" style="display: none;">✓</div>
                    </div>
                    <div class="step-content">
                        <h3>Connect MetaMask</h3>
                        <p>Waiting for wallet connection...</p>
                    </div>
                </div>
                <div class="step" id="signStep">
                    <div class="step-icon">
                        <div class="spinner" style="display: none;"></div>
                        <div class="check-icon" style="display: none;">✓</div>
                    </div>
                    <div class="step-content">
                        <h3>Sign Message</h3>
                        <p>Please sign the verification message...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passkey Steps -->
        <div id="passkeySteps" class="auth-content" style="display: none;">
            <h2>Passkey Authentication</h2>
            <div class="connection-steps">
                <div class="step" id="passkeyStep">
                    <div class="step-icon">
                        <div class="spinner"></div>
                        <div class="check-icon" style="display: none;">✓</div>
                    </div>
                    <div class="step-content">
                        <h3>Verify with Passkey</h3>
                        <p>Please follow your device's prompts to continue...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{{ end }} 